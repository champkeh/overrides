var strings_18 = [
    "test",
    "lastChapterIdx",
    "errMsg",
    "warning",
    "bookUpload_fileSelectPanel_file",
    "parse",
    "value",
    "book",
    "Error in fetchShelfMemberCard",
    "inDevelopment",
    "__esModule",
    "get",
    "done",
    "bookUpload_progressBar_info",
    "push",
    "UPDATE_SHELF_LOAD_MORE",
    "div",
    "选择文件",
    "log",
    "FETCH_SHELF_LOAD_MORE",
    "defineProperty",
    "bookId",
    "preventDefault",
    "WrBookUploadErrorType",
    "handleBarClick",
    "percent",
    "updatedBooks",
    "你当前的传输进度将不会被保存",
    "map",
    "uploadCount",
    "post",
    "bookInfo",
    "hasOwnProperty",
    "tooltipRight",
    "$refs",
    "UPDATE_SHELF_BALANCE",
    "wr_upload_limit_paid_lang_icon",
    "FETCH_SHELF_MEMBER_CARD",
    "导入失败",
    "shelf",
    "state",
    "merge",
    "slice",
    "registerModule",
    "wr_upload_devPanel_item",
    "checkSuffix",
    "$route",
    "data",
    "uploadLimit",
    " 本，上限 ",
    "abrupt",
    "isEnvClient",
    "bookInfos",
    "extra",
    "rawBooks",
    "find",
    "archives",
    "isPhone",
    "while (true) {}",
    "name",
    "error",
    "read chunk nr",
    "prototype",
    "offsetWidth",
    "bookProgress",
    "shelfFullCGI",
    "$store",
    "dispatch",
    "weread-epub-1258476243",
    "uploadTaskList",
    "booksAndArchives",
    "catch",
    ".epub,.txt,.pdf,.doc,.docx,.mobi,.azw3",
    "reduce",
    "call",
    "bookIds",
    "shelfIndexPayloadHelper",
    "loaded",
    "err",
    "credentialLock",
    "file",
    "readUpdateTime",
    "time",
    "isShelfFull",
    "img",
    "reject",
    "onerror",
    "ExpiredTime",
    "updateUploadStatus",
    "): size=",
    "user",
    "$emit",
    "sort",
    "https://weread-1258476243.file.myqcloud.com/web/wrwebnjlogic/image/upload_uploading_icon_2x.dd6c2d10.png",
    "commit",
    "UPDATE_SHELF_UPDATED_BOOKS",
    "UPDATE_SHOW_NAV_BAR",
    "then",
    "$showLoginDialog",
    "file-select-panel",
    "input",
    "wereadDesktopCosError",
    "exports",
    "bookUpload_progress_warp",
    "onCredentialSuccess",
    "upload",
    "undefined",
    "uploading",
    "unlockCredential",
    "mark",
    "已导入 ",
    "bookUpload_fileSelectPanel_icon",
    "finished",
    "stop",
    "/web/shelf/sync",
    "archiveId",
    "uploadList",
    "bookUpload_fileSelect",
    "Error in fetchMiniShelf",
    "/web/cos/notify",
    "checkTimeout",
    "progress",
    "lectureBooks",
    "vid",
    "_self",
    "paid",
    "reportClientBusiness",
    "payingRemainTime",
    "reportReaderPdf",
    "ios",
    "handleReportUploadProtoError",
    "target",
    "path",
    "span",
    "Web_BookShelf_Import_Err_Parsing",
    "size",
    "all",
    "Response",
    "message",
    "wr_upload_limit_unpaid_title",
    "FETCH_SHELF_UPLOAD_COUNT",
    "TmpSecretKey",
    "result",
    "[COS] upload success",
    "prev",
    "handleLogin",
    "type",
    "err_upload_shelf_full",
    "uploadData",
    "netWork error during upload to cos",
    "handleFileDrop",
    "data.emptyInfoIds",
    "handleUpload",
    "filter",
    "UPDATE_SHELF_LOADING_MORE",
    "status",
    "memberCardSummary",
    "文件类型不支持",
    "checkSize",
    "next",
    "archive",
    "bookUpload_fileSelectPanel_label",
    "[COS] upload error ",
    "allBooks[0].lectureReadUpdateTime",
    "length",
    "shelfIndexes",
    "UPDATE_SHELF",
    "findIndex",
    "limit",
    "wr_upload_limit_wrapper",
    "forceShelfFull",
    "uploadingCount",
    "return",
    "\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",
    "default"
]

var _0x16c5 = function (idx) {
    return strings_18[Number(idx)]
};


window.webpackJsonp = window.webpackJsonp || []
window.webpackJsonp.push(
    [
        [18, 5],
        {
            691: function (module, exports, require) {
                require['r'](exports)

                let m1962 = require(1962),
                    m1263 = require(1263);

                for (let key in m1263) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1263[key];
                        })
                    }
                }

                require(1742)

                let _0x2452b7 = require(0x1),
                    _0x4cf0b0 = Object(_0x2452b7['a'])(m1263['default'], m1962['a'], m1962['b'], !0x1, null, null, null);

                exports.default = _0x4cf0b0.exports
            },

            // store: shelf
            1032: function (module, exports, require) {
                Object.defineProperty(exports, '__esModule', {value: true})

                let _0x15800c = _0x3a1e45(require(0x5b)),
                    _0x1e0aad = _0x3a1e45(require(0x47)),
                    _0xa39f7 = _0x3a1e45(require(0xc3)),
                    _0x32cb70 = _0x3a1e45(require(0x33)),
                    _0x4f3905 = _0x3a1e45(require(0xc1)),
                    _0x57d38a = _0x3a1e45(require(0x16c)),
                    _0x39d0e4 = _0x3a1e45(require(0x10f));

                let _0x8a7448 = _0x3a1e45(require(0x5c)),
                    _0x5755d5 = _0x3a1e45(require(0x35)),
                    _0x3cc8f0 = _0x279846(require(52)),
                    _0x481a8b = _0x279846(require(70)),
                    _0x266dc6 = _0x3a1e45(require(0x10e)),
                    _0x3cb3af = _0x3a1e45(require(1323)),
                    _0x3708be = _0x3a1e45(require(0x5e));

                function _0x279846(_0x38fdcd) {
                    if (_0x38fdcd && _0x38fdcd['__esModule'])
                        return _0x38fdcd;
                    var _0x4ded3e = {};
                    if (null != _0x38fdcd)
                        for (var _0x104795 in _0x38fdcd)
                            Object[_0x16c5('0x3e')][_0x16c5('0x20')]['call'](_0x38fdcd, _0x104795) && (_0x4ded3e[_0x104795] = _0x38fdcd[_0x104795]);
                    return _0x4ded3e['default'] = _0x38fdcd,
                        _0x4ded3e;
                }

                function _0x3a1e45(_0x896e1a) {
                    return _0x896e1a && _0x896e1a['__esModule'] ? _0x896e1a : {
                        'default': _0x896e1a
                    };
                }

                let _0x32048c = require(0x8),
                    _0x47b3e6 = require(0x1f);

                function _0x4d815c() {
                    var _0x512eb3,
                        _0x5531d6 = _0x32048c.inDevelopment();

                    _0x5531d6 && (_0x512eb3 = console).log.apply(_0x512eb3, ['shelf'].concat(Array.prototype.slice.call(arguments)))
                }

                exports.default = function () {
                    const mutations = {}
                    _0x4f3905.default(mutations, 'updateShelf', function (state, payload) {
                        const _0x5cc4ad = state.rawBooks
                        _0x5cc4ad.push.apply(_0x5cc4ad, _0x39d0e4.default(payload))
                    })
                    _0x4f3905.default(mutations, 'updateMiniShelf', function (state, payload) {
                        state.miniShelf = payload
                    })
                    _0x4f3905.default(mutations, 'updateShelfBalance', function (state, payload) {
                        state.balanceIOS = _0x47b3e6.get(payload, 'balance', 0)
                        state.balanceAndroid = _0x47b3e6.get(payload, 'peerBalance', 0)
                    })
                    _0x4f3905.default(mutations, 'updateShelfMemberCard', function (state, payload) {
                        state.memberCardSummary = payload.memberCardSummary
                    })
                    _0x4f3905.default(mutations, 'updateShelfUpdatedBooks', function (state, payload) {
                        _0x4d815c('UPDATE_SHELF_UPDATED_BOOKS', payload)
                        state.updatedBooks = _0x47b3e6.uniq([].concat(_0x39d0e4.default(state.updatedBooks), _0x39d0e4.default(payload)))
                    })
                    _0x4f3905.default(mutations, 'updateShelfIndex', function (state, shelfIndex) {
                        state.shelfIndexes = shelfIndex
                    })
                    _0x4f3905.default(mutations, 'updateShelfUploadCount', function (state, payload) {
                        state.uploadCount = payload
                    })
                    _0x4f3905.default(mutations, 'updateRawIndex', function (state, rawIndex) {
                        state.rawIndexes = rawIndex
                    })
                    _0x4f3905.default(mutations, 'updateShelfLoadingMore', function (state, payload) {
                        state.loadingMore = payload
                    })
                    _0x4f3905.default(mutations, 'updateShelfLoadMore', function (state, payload) {
                        let _0x3678a7,
                            _0x2249de = payload['booksAndArchives'],
                            _0x1740dc = payload['archives'];

                        (_0x3678a7 = state.booksAndArchives).push.apply(_0x3678a7, _0x39d0e4.default(_0x2249de));

                        let _0x5ebe74 = function (archive) {
                                let idx1 = _0x47b3e6.findIndex(state.archive, (_) => _.archiveId === archive.archiveId),
                                    idx2 = _0x47b3e6.findIndex(state.booksAndArchives, (_) => _.archiveId === archive.archiveId);

                                if (idx1 > -1) {
                                    const _0x42a3bf = state.archive[idx1]
                                    state.archive[idx1] = _0x47b3e6.merge(_0x42a3bf, archive)
                                } else {
                                    state.archive.push(archive)
                                }
                                if (idx2 > -1) {
                                    const _0x551477 = state.booksAndArchives[idx2]
                                    state.booksAndArchives[idx2] = _0x47b3e6.merge(_0x551477, archive)
                                }
                            },
                            _0x1c4b4 = true,
                            _0x54c942 = false,
                            _0x117e62 = undefined;
                        try {
                            for (let _0x356c0a, _0x3cd930 = _0x57d38a.default(_0x1740dc); !(_0x1c4b4 = (_0x356c0a = _0x3cd930.next()).done); _0x1c4b4 = !0x0) {
                                _0x5ebe74(_0x356c0a.value)
                            }
                        } catch (err) {
                            _0x54c942 = true
                            _0x117e62 = err
                        } finally {
                            try {
                                !_0x1c4b4 && _0x3cd930['return'] && _0x3cd930['return']();
                            } finally {
                                if (_0x54c942)
                                    throw _0x117e62;
                            }
                        }
                    })
                    _0x4f3905.default(mutations, 'deleteShelfIndex', function (state, payload) {
                        const idx = _0x47b3e6.findIndex(state.shelfIndexes, (_) => _.idx === payload)
                        idx > -1 && state.shelfIndexes.splice(idx, 1)
                    })
                    _0x4f3905.default(mutations, 'updateShelfArchiveLoadMore', function (state, payload) {
                        const idx = _0x47b3e6.findIndex(state.archive, (_) => _.archiveId === payload.archiveId)
                        payload.first4Books = payload.loaded.slice(0, 4)
                        if (idx > -1) {
                            _0x4d815c('archiveIndex', idx)
                            state.archive[idx].loaded = payload.loaded
                            state.archive[idx].first4Books = payload.loaded.slice(0, 4)
                        } else {
                            state.archive.push(payload)
                        }

                        const idx2 = _0x47b3e6.findIndex(state.shelfIndexes, (_) => _.archiveId === payload.archiveId);
                        if (idx2 > -1) {
                            _0x4d815c('archiveInShelfIndexes', idx2)
                            state.shelfIndexes[idx2].loaded = payload.loaded
                            state.shelfIndexes[idx2].first4Books = payload.loaded.slice(0, 4)
                        }
                    })

                    const actions = {}
                    _0x4f3905.default(actions, 'fetchShelf', function (context, payload) {
                        const _commit = context['commit']

                        _0x4d815c(payload)
                        return _0x8a7448.default('/web/shelf/sync', _0x32cb70.default({}, payload), (resp) => {
                            let respData = resp.data,
                                archives = _0x47b3e6.get(respData, 'archive', []),
                                books = _0x47b3e6.get(respData, 'books', []),
                                bookIds = books.filter((_) => _.bookId),
                                lectureBooks = _0x47b3e6.get(respData, 'lectureBooks', []),
                                bookProgress = _0x47b3e6.get(respData, 'bookProgress', []),
                                booksAndArchives = [];

                            if (archives.length > 0) {
                                let _0x1c464b = true,
                                    _0x5f4089 = false,
                                    _0xcaeecb = undefined;
                                try {
                                    for (let _0x44f904, _0x4e36c0 = _0x57d38a.default(archives); !(_0x1c464b = (_0x44f904 = _0x4e36c0['next']())['done']); _0x1c464b = !0x0) {
                                        let archive = _0x44f904['value'],
                                            _0x5862e3 = [],
                                            _0x2c85a8 = [],
                                            _0x52f884 = function (bookId) {
                                                let idx = _0x47b3e6.findLastIndex(books, (_) => _.bookId === bookId)
                                                    - 1 !== idx && _0x5862e3.push(books.splice(idx, 1)[0])
                                            },
                                            _0x40d33f = !0x0,
                                            _0x36eaf6 = !0x1,
                                            _0x470a7b = void 0x0;
                                        try {
                                            for (let _0x13410d, _0x36aa10 = _0x57d38a.default(archive.bookIds); !(_0x40d33f = (_0x13410d = _0x36aa10['next']())['done']); _0x40d33f = !0x0) {
                                                _0x52f884(_0x13410d['value']);
                                            }
                                        } catch (err) {
                                            _0x36eaf6 = true
                                            _0x470a7b = err
                                        } finally {
                                            try {
                                                !_0x40d33f && _0x36aa10[_0x16c5('0xac')] && _0x36aa10[_0x16c5('0xac')]();
                                            } finally {
                                                if (_0x36eaf6)
                                                    throw _0x470a7b;
                                            }
                                        }

                                        let _0x39a2fb = function (lectureBookId) {
                                                let idx = _0x47b3e6.findLastIndex(lectureBooks, (_) => _.bookId === lectureBookId)
                                                if (-1 !== idx) {
                                                    let lectureBook = lectureBooks.splice(idx, 1)[0]
                                                    lectureBook.readUpdateTime = lectureBook.lectureReadUpdateTime
                                                    lectureBook.isAudio = true
                                                    _0x2c85a8.push(_0x32cb70.default({}, lectureBook))
                                                }
                                            },
                                            _0x39bfdf = !0x0,
                                            _0x3c82c3 = !0x1,
                                            _0x15bb89 = void 0x0;
                                        try {
                                            for (let _0x59e3be, _0x2c8f9c = _0x57d38a.default(archive.lectureBookIds); !(_0x39bfdf = (_0x59e3be = _0x2c8f9c['next']())['done']); _0x39bfdf = !0x0) {
                                                _0x39a2fb(_0x59e3be['value']);
                                            }
                                        } catch (err) {
                                            _0x3c82c3 = true
                                            _0x15bb89 = err
                                        } finally {
                                            try {
                                                !_0x39bfdf && _0x2c8f9c['return'] && _0x2c8f9c[_0x16c5('0xac')]();
                                            } finally {
                                                if (_0x3c82c3)
                                                    throw _0x15bb89;
                                            }
                                        }
                                        archive.bookInfos = _0x5862e3
                                            .filter((_) =>
                                                _0x266dc6.default.isSupportedBookType(_.type) ||
                                                _0x266dc6.default.isPDFBookType(_.type) ||
                                                _0x266dc6.default.isMPBookType(_.type))
                                            .sort((a, b) => b.readUpdateTime - a.readUpdateTime)
                                            .map((_) => {
                                                let idx = _0x47b3e6.findIndex(bookProgress, (i) => _.bookId === i.bookId),
                                                    progress = idx > -1 ? bookProgress[idx].progress : 0;
                                                return _0xa39f7.default(_0x47b3e6.pick(_, [
                                                    'bookId',
                                                    'title',
                                                    'author',
                                                    'cover',
                                                    'secret',
                                                    'format',
                                                    'soldout',
                                                    'payType',
                                                    'finished',
                                                    'finishReading',
                                                    'lastChapterIdx',
                                                    'readUpdateTime',
                                                    'updateTime',
                                                ]), {
                                                    'progress': progress,
                                                    'updated': 0,
                                                    'isTrial': _0x266dc6.default.isTrialReadBook(_)
                                                })
                                            })
                                        archive.lectureBookInfos = _0x2c85a8
                                        archive.allBooks = [].concat(
                                            _0x39d0e4.default(archive.bookInfos),
                                            _0x39d0e4.default(archive.lectureBookInfos)
                                        ).sort((a, b) => b.readUpdateTime - a.readUpdateTime)
                                        archive.type = 'archive'
                                        archive.readUpdateTime = Math.max(
                                            _0x47b3e6.get(archive, 'allBooks[0].readUpdateTime', 0),
                                            _0x47b3e6.get(archive, 'allBooks[0].lectureReadUpdateTime', 0)
                                        )
                                    }
                                } catch (err) {
                                    _0x5f4089 = true
                                    _0xcaeecb = err
                                } finally {
                                    try {
                                        !_0x1c464b && _0x4e36c0['return'] && _0x4e36c0['return']();
                                    } finally {
                                        if (_0x5f4089)
                                            throw _0xcaeecb;
                                    }
                                }
                            }
                            if (books.length > 0) {
                                books = books
                                    .filter((_) =>
                                        _0x266dc6.default.isSupportedBookType(_.type) ||
                                        _0x266dc6.default.isPDFBookType(_.type) ||
                                        _0x266dc6.default.isMPBookType(_.type))
                                    .sort((a, b) => b.readUpdateTime - a.readUpdateTime)
                                    .map((_) => {
                                        let idx = _0x47b3e6.findIndex(bookProgress, (i) => _.bookId === i.bookId),
                                            progress = idx > -1 ? bookProgress[idx].progress : 0;
                                        return _0xa39f7.default(_0x47b3e6.pick(_, [
                                            'bookId',
                                            'title',
                                            'author',
                                            'cover',
                                            'secret',
                                            'format',
                                            'soldout',
                                            'payType',
                                            'finished',
                                            'finishReading',
                                            'lastChapterIdx',
                                            'readUpdateTime',
                                            'updateTime',
                                        ]), {
                                            'bookType': _.type,
                                            'progress': progress,
                                            'updated': 0,
                                            'isTrial': _0x266dc6.default.isTrialReadBook(_),
                                        })
                                    })
                            }

                            let _0x24a9db = !0x0
                                , _0x1ece8c = !0x1
                                , _0x30708f = void 0x0;
                            try {
                                for (let _0x322ed8, _0x402116 = _0x57d38a.default(books); !(_0x24a9db = (_0x322ed8 = _0x402116['next']())['done']); _0x24a9db = !0x0) {
                                    let book = _0x322ed8['value'];
                                    booksAndArchives.push(_0x32cb70.default({}, book, {
                                        'type': 'book'
                                    }))
                                }
                            } catch (err) {
                                _0x1ece8c = true
                                _0x30708f = err
                            } finally {
                                try {
                                    !_0x24a9db && _0x402116['return'] && _0x402116['return']();
                                } finally {
                                    if (_0x1ece8c)
                                        throw _0x30708f;
                                }
                            }

                            let _0x10d470 = !0x0
                                , _0x20c0a9 = !0x1
                                , _0x4592d5 = void 0x0;
                            try {
                                for (let _0x350acb, _0x22d909 = _0x57d38a.default(lectureBooks); !(_0x10d470 = (_0x350acb = _0x22d909['next']())['done']); _0x10d470 = !0x0) {
                                    let lectureBook = _0x350acb.value
                                    booksAndArchives.push(_0x32cb70.default({}, lectureBook, {
                                        'readUpdateTime': lectureBook.lectureReadUpdateTime,
                                        'type': 'book',
                                        'isAudio': true,
                                    }))
                                }
                            } catch (err) {
                                _0x20c0a9 = true
                                _0x4592d5 = err
                            } finally {
                                try {
                                    !_0x10d470 && _0x22d909['return'] && _0x22d909['return']();
                                } finally {
                                    if (_0x20c0a9)
                                        throw _0x4592d5;
                                }
                            }

                            booksAndArchives = [].concat(_0x39d0e4.default(booksAndArchives), _0x39d0e4.default(archives)).sort((a, b) => b.readUpdateTime - a.readUpdateTime)
                            bookIds = bookIds.sort((a, b) => b.readUpdateTime - a.readUpdateTime)
                            _commit(_0x481a8b['UPDATE_SHELF'], {
                                'books': books,
                                'bookProgress': bookProgress,
                                'archive': archives,
                                'booksAndArchives': booksAndArchives,
                                'rawBooks': bookIds
                            })
                        }, (err) => {
                            _0x4d815c('Error in fetchShelf', err)
                        })
                    })
                    _0x4f3905.default(actions, 'fetchShelfIndex', function (context, payload) {
                        let _commit = context.commit,
                            currentArchiveId = _0x47b3e6.get(payload, 'currentArchiveId', 0)

                        return _0x8a7448.default('/web/shelf/sync', _0x32cb70.default({}, payload, {
                            'onlyBookid': 1
                        }), resp => {
                            let respData = resp.data
                            _commit('updateRawIndex', [].concat(_0x39d0e4.default(respData.bookIds)))
                            var _0x492b17 = _0x3cb3af.default.shelfIndexPayloadHelper(respData, currentArchiveId)
                            _0x4d815c('parsedData', _0x492b17.length)
                            _commit('updateShelfIndex', _0x492b17)
                        }, (err) => {
                            _0x4d815c('Error in fetchShelfIndex', err)
                        })
                    })
                    _0x4f3905.default(actions, 'fetchShelfUploadCount', function (context, payload) {
                        let _commit = context['commit'];

                        return _0x8a7448.default('/web/shelf/sync', _0x32cb70.default({}, payload, {
                            'cbcount': 1
                        }), (resp) => {
                            let respData = resp.data
                            _commit(_0x481a8b['UPDATE_SHELF_UPLOAD_COUNT'], respData.cbcount)
                        }, (err) => {
                            _0x4d815c('Error in fetchShelfUploadCount', err)
                        })
                    })
                    _0x4f3905.default(actions, 'fetchMiniShelf', function (context, payload) {
                        let _commit = context['commit'],
                            count = _0x47b3e6.get(payload, 'count', 4);

                        return new _0x1e0aad.default(function (_0x200dad, _0x1f6971) {
                                _0x8a7448.default('/web/shelf/sync', _0x32cb70.default({}, payload, {
                                    'onlyBookid': 1,
                                    'count': 10
                                }), (resp) => {
                                    const bookIds = _0x47b3e6.get(resp, 'data.bookIds', [])
                                    if (0 !== bookIds.length) {
                                        let _0x262018 = bookIds.filter((_) => 0 === _.type && _.bookId).slice(0, 10)
                                        _0x4d815c('booksNeedFetch', _0x262018)
                                        if (0 !== _0x262018.length) {
                                            let bookIds = _0x262018.map((_) => _.bookId)
                                            return _0x5755d5.default('/web/shelf/syncBook', _0x32cb70.default({}, payload, {
                                                'bookIds': bookIds
                                            }), (resp) => {
                                                let _0x5e596f = _0x47b3e6.get(resp, 'data.books', [])
                                                _commit(_0x481a8b['UPDATE_MINI_SHELF'], _0x5e596f.slice(0, count))
                                                _0x200dad(resp.data)
                                            }, (err) => {
                                                _0x4d815c('Error in fetchMiniShelf', err)
                                                _0x1f6971(err)
                                            })
                                        }
                                        _0x200dad([]);
                                    } else
                                        _0x200dad([]);
                                }, (err) => {
                                    _0x4d815c('Error in fetchMiniShelf', err)
                                    _0x1f6971(err)
                                });
                            }
                        );
                    })
                    _0x4f3905.default(actions, 'fetchShelfAccount', function (context) {
                        let _dispatch = context['dispatch'];

                        return _0x1e0aad.default.all([
                            _dispatch(_0x3cc8f0['FETCH_SHELF_BALANCE'], {
                                'pf': 'ios_html'
                            }),
                            _dispatch(_0x3cc8f0['FETCH_SHELF_MEMBER_CARD'], {
                                'pf': 'ios'
                            }),
                        ]);
                    })
                    _0x4f3905.default(actions, 'fetchShelfBalance', function (_0x2524fe, _0x5b3993) {
                        var _0x18f561 = _0x2524fe[_0x16c5('0x5e')]
                            , _0x42bdc0 = _0x5b3993['pf'];
                        return (0x0,
                            _0x5755d5['default'])('/web/pay/balance', {
                            'pf': _0x42bdc0
                        }, function (_0x32008a) {
                            _0x18f561(_0x481a8b['UPDATE_SHELF_BALANCE'], _0x32008a[_0x16c5('0x2f')]);
                        }, function (_0x2026a9) {
                            _0x4d815c('Error\x20in\x20fetchShelfBalance', _0x2026a9);
                        });
                    })
                    _0x4f3905.default(actions, 'fetchShelfMemberCard', function (_0x3f5f1b, _0x4ce730) {
                        var _0x24f0fc = _0x3f5f1b['commit']
                            , _0x1ba0be = _0x4ce730['pf'];
                        return (0x0,
                            _0x8a7448['default'])('/web/pay/memberCardSummary', {
                            'pf': _0x1ba0be
                        }, function (_0xa41158) {
                            _0x24f0fc(_0x481a8b['UPDATE_SHELF_MEMBER_CARD'], {
                                'memberCardSummary': _0xa41158['data']
                            });
                        }, function (_0x6b2da8) {
                            _0x4d815c(_0x16c5('0x8'), _0x6b2da8);
                        });
                    })
                    _0x4f3905.default(actions, 'fetchShelfMemberCardSvr', function (_0x168e86, _0x3a7b64) {
                        var _0x35a3e6 = _0x168e86[_0x16c5('0x5e')];
                        return (0x0,
                            _0x8a7448['default'])('/web/pay/memberCardSummary', _0x3a7b64, function (_0x3761aa) {
                            _0x35a3e6(_0x481a8b['UPDATE_SHELF_MEMBER_CARD'], {
                                'memberCardSummary': _0x3761aa['data']
                            });
                        }, function (_0x221076) {
                            _0x4d815c(_0x16c5('0x8'), _0x221076);
                        });
                    })
                    _0x4f3905.default(actions, 'fetchShelfUpdatedBooks', function (context, payload) {
                        let _commit = context['commit'],
                            _state = context['state'],
                            _0x18364a = _0x3708be.default.getBookLastChaptersOperator(payload),
                            _0x498078 = _0x18364a['exist'],
                            _0x13a956 = _0x18364a['value'],
                            _0x4379cc = {},
                            updatedBooks = [];

                        _state.rawBooks
                            .filter((_) =>
                                _0x266dc6.default.isSupportedBookType(_.type) ||
                                _0x266dc6.default.isPDFBookType(_.type) ||
                                _0x266dc6.default.isMPBookType(_.type)
                            )
                            .forEach((_) => {
                                let _0x11b950 = _0x47b3e6.get(_, 'lastChapterIdx', 0),
                                    _0x2bef9a = _0x47b3e6.get(_0x13a956, _.bookId, '');

                                if (_0x2bef9a) {
                                    _0x11b950 && _0x11b950 > _0x2bef9a && 0 === _0x47b3e6.get(_, 'finished') && _0x47b3e6.get(_, 'updateTime', 0) > _0x47b3e6.get(_, 'readUpdateTime', 0) && updatedBooks.push(_.bookId)
                                    _0x4379cc[_.bookId] = _0x2bef9a
                                } else {
                                    _0x4379cc[_.bookId] = _0x11b950
                                }
                            })
                        _commit(_0x481a8b['UPDATE_SHELF_UPDATED_BOOKS'], updatedBooks)
                        if (_0x15800c.default(_0x4379cc).length > 0) {
                            _0x18364a.setValue(_0x4379cc)
                            _0x18364a.save()
                        } else {
                            if (_0x498078) {
                                _0x18364a.clearValue()
                                _0x18364a.save()
                            }
                        }
                    })
                    _0x4f3905.default(actions, 'fetchShelfLoadMore', function (context, payload) {
                        var _0x206d14 = context[_0x16c5('0x5e')]
                            , _0x33d290 = context[_0x16c5('0x28')];
                        if (!(_0x33d290['loadingMore'] || _0x33d290['booksAndArchives']['length'] >= _0x33d290[_0x16c5('0xa5')]['length'])) {
                            _0x206d14(_0x481a8b[_0x16c5('0x9a')], !0x0);
                            var _0x118985 = _0x47b3e6['get'](payload, 'currentArchiveId', 0x0)
                                ,
                                _0x716eaf = _0x3cb3af['default']['shelfLoadMorePayloadHelper'](_0x33d290['shelfIndexes'], _0x33d290[_0x16c5('0x46')]['length'], payload['count'], _0x118985)
                                , _0xf53ace = _0x716eaf['items']
                                , _0x2debb5 = _0x716eaf[_0x16c5('0x4b')];
                            return _0x4d815c('fetchShelfLoadMore', _0xf53ace['length']),
                                (0x0,
                                    _0x5755d5['default'])('/web/shelf/syncBook', (0x0,
                                    _0x32cb70['default'])({
                                    'bookIds': _0x2debb5
                                }, payload), function (_0x406205) {
                                    var _0x1747be = _0x47b3e6['get'](_0x406205, 'data.books', [])
                                        ,
                                        _0x29e26f = _0x47b3e6['get'](_0x406205, 'data.emptyInfoIds', [])[_0x16c5('0x1c')](function (_0x1ebc94) {
                                            return _0x1ebc94['bookId'];
                                        });
                                    _0x4d815c('emptyInfoIds', _0x29e26f),
                                        _0x206d14(_0x481a8b['UPDATE_SHELF'], _0x1747be);
                                    var _0x1dd0e1 = _0x3cb3af['default']['shelfLoadMoreMergeHelper'](_0xf53ace, _0x1747be, _0x29e26f)
                                        , _0x590ce4 = _0x1dd0e1[_0x16c5('0x38')]
                                        , _0x186dd4 = _0x1dd0e1[_0x16c5('0x8e')]
                                        , _0x20b01b = _0x1dd0e1['idxDeleted'];
                                    if (_0x20b01b['length']) {
                                        var _0x3420a6 = !0x0
                                            , _0xcea378 = !0x1
                                            , _0x33d91b = void 0x0;
                                        try {
                                            for (var _0x377f1c, _0x81f99b = (0x0,
                                                _0x57d38a['default'])(_0x20b01b); !(_0x3420a6 = (_0x377f1c = _0x81f99b[_0x16c5('0x9f')]())[_0x16c5('0xc')]); _0x3420a6 = !0x0) {
                                                var _0x37e510 = _0x377f1c['value'];
                                                _0x206d14(_0x481a8b['DELETE_SHELF_INDEX'], _0x37e510);
                                            }
                                        } catch (_0x184bcd) {
                                            _0xcea378 = !0x0,
                                                _0x33d91b = _0x184bcd;
                                        } finally {
                                            try {
                                                !_0x3420a6 && _0x81f99b[_0x16c5('0xac')] && _0x81f99b[_0x16c5('0xac')]();
                                            } finally {
                                                if (_0xcea378)
                                                    throw _0x33d91b;
                                            }
                                        }
                                    }
                                    _0x4d815c('fetchShelfLoadMore', _0x186dd4['length']),
                                        _0x206d14(_0x481a8b['UPDATE_SHELF_LOAD_MORE'], {
                                            'booksAndArchives': _0x186dd4,
                                            'archives': _0x590ce4
                                        }),
                                        _0x206d14(_0x481a8b[_0x16c5('0x9a')], !0x1);
                                }, function (_0x2e3686) {
                                    _0x4d815c('Error\x20in\x20fetchShelfLoadMore', _0x2e3686),
                                        _0x206d14(_0x481a8b['UPDATE_SHELF_LOADING_MORE'], !0x1);
                                });
                        }
                    })
                    _0x4f3905.default(actions, 'fetchShelfArchiveLoadMore', function (_0x4f2207, _0x745e72) {
                        var _0xaebc1 = _0x4f2207[_0x16c5('0x5e')]
                            , _0x152ed0 = _0x4f2207['state']
                            , _0x19789d = _0x47b3e6[_0x16c5('0xb')](_0x745e72, 'currentArchiveId', 0x0)
                            , _0x9e2eba = _0x47b3e6[_0x16c5('0xb')](_0x745e72, 'count', 0x0)
                            , _0x217ba2 = _0x47b3e6[_0x16c5('0x37')](_0x152ed0[_0x16c5('0xa5')], {
                            'archiveId': _0x19789d
                        });
                        if (_0x217ba2) {
                            var _0x18ec5d = _0x3cb3af['default']['archiveLoadMorePayloadHelper'](_0x217ba2, _0x9e2eba);
                            if (0x0 !== _0x18ec5d['length'])
                                return _0xaebc1(_0x481a8b['UPDATE_SHELF_LOADING_MORE'], !0x0),
                                    (0x0,
                                        _0x5755d5['default'])('/web/shelf/syncBook', (0x0,
                                        _0x32cb70['default'])({
                                        'bookIds': _0x18ec5d
                                    }, _0x745e72), function (_0x35c9b7) {
                                        var _0x5d5ac2 = _0x47b3e6['get'](_0x35c9b7, 'data.books', [])
                                            ,
                                            _0x1a22cc = _0x47b3e6['get'](_0x35c9b7, _0x16c5('0x97'), [])['map'](function (_0x3d4383) {
                                                return _0x3d4383['bookId'];
                                            });
                                        _0x4d815c('emptyInfoIds', _0x1a22cc),
                                            _0xaebc1(_0x481a8b['UPDATE_SHELF'], _0x5d5ac2);
                                        var _0x4a0396 = _0x3cb3af['default']['archiveLoadMoreMergeHelper'](_0x217ba2, _0x5d5ac2, _0x1a22cc);
                                        _0xaebc1(_0x481a8b['UPDATE_SHELF_ARCHIVE_LOAD_MORE'], _0x4a0396),
                                            _0xaebc1(_0x481a8b['UPDATE_SHELF_LOADING_MORE'], !0x1);
                                    }, function (_0x210f22) {
                                        _0x4d815c('Error\x20in\x20fetchShelfArchiveLoadMore', _0x210f22),
                                            _0xaebc1(_0x481a8b['UPDATE_SHELF_LOADING_MORE'], !0x1);
                                    });
                            _0x4d815c('Error\x20in\x20fetchShelfArchiveLoadMore:\x20bookIdsToFetch.length=0');
                        } else
                            _0x4d815c('Error\x20in\x20fetchShelfArchiveLoadMore:\x20archiveId=' + _0x19789d + '\x20not\x20found');
                    })

                    return {
                        'state': {
                            'miniShelf': [],
                            'archive': [],
                            'books': [],
                            'uploadCount': 0,
                            'bookProgress': [],
                            'balanceIOS': 0,
                            'balanceAndroid': 0,
                            'memberCardSummary': {},
                            'booksAndArchives': [],
                            'rawBooks': [],
                            'loadingMore': false,
                            'rawIndexes': [],
                            'shelfIndexes': [],
                            'updatedBooks': []
                        },
                        'getters': {
                            'isLoading': function (state) {
                                return state.loadingMore
                            },
                            'hasMore': function (state) {
                                return state.booksAndArchives.length < state.shelfIndexes.length
                            }
                        },
                        'mutations': mutations,
                        'actions': actions,
                    };
                }
            },
            1263: function (module, exports, require) {
                require['r'](exports)

                let m1264 = require(1264),
                    _0x185fa5 = require['n'](m1264);

                for (let key in m1264) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1264[key];
                        })
                    }
                }

                exports.default = _0x185fa5['a']
            },

            // BookUpload.vue
            1264: function (module, exports, require) {
                Object.defineProperty(exports, '__esModule', {value: true})

                let _0x535603 = _0xcef15b(require(0x33)),
                    _0x2f7d12 = _0xcef15b(require(0x47)),
                    _0x4ab30f = _0xcef15b(require(0x27)),
                    _0x43da30 = _0xcef15b(require(0x16d)),
                    _0x2219e6 = _0xcef15b(require(0x16e)),
                    _0x9049ff = _0xcef15b(require(991)),
                    _0x151607 = _0xcef15b(require(0x172)),
                    _0x2c48d5 = _0xcef15b(require(0x16)),
                    _0x5b69b6 = _0xcef15b(require(0x35)),
                    _0x5ae67f = _0xcef15b(require(1032)),
                    _0x3e164d = _0x452513(require(0x46)),
                    ProgressBar = _0xcef15b(require(1720)),
                    FileSelectPanel = _0xcef15b(require(1723)),
                    _0x364152 = _0xcef15b(require(0xc2)),
                    FileLimitPanel = _0xcef15b(require(1725)),
                    _0x5ee49b = _0x452513(require(52));

                function _0x452513(_exports) {
                    if (_exports && _exports.__esModule) {
                        return _exports;
                    }
                    var _module = {};
                    if (null != _exports) {
                        for (const key in _exports) {
                            if (Object.prototype.hasOwnProperty.call(_exports, key)) {
                                _module[key] = _exports[key]
                            }
                        }
                    }
                    _module.default = _exports
                    return _module;
                }

                function _0xcef15b(_exports) {
                    return _exports && _exports.__esModule ? _exports : {
                        'default': _exports
                    };
                }

                let _0x20abfc,
                    _0x406a30,
                    envConfig = require(8),
                    _0x2efcf3 = require(752),
                    _0x2ea826 = '网络错误，请检查网络后重试',
                    _0x507e41 = '导入超时 · 点击重试',
                    _300M = 0x12c00000, // 300M
                    _50M = 0x3200000; // 50M

                _0x406a30 = _0x2219e6.default(_0x43da30.default.mark(function _0x35a808(task) {
                    let file,
                        fileExt,
                        m1727,
                        timer,
                        cosKey,
                        _this = this;

                    return _0x43da30.default.wrap(function (_0xde910) {
                        for (; ;)
                            switch (_0xde910.prev = _0xde910.next) {
                                case 0x0:
                                    file = task.file
                                    if (file.name && /(\.pdf)/.test(file.name.toLowerCase())) {
                                        this.reportReaderPdf({
                                            'itemName': 'webReaderPdf_upload'
                                        })
                                    }

                                    fileExt = this.getSuffix(file.name)
                                    _0xde910.t0 = fileExt

                                    if ('doc' === _0xde910.t0) {
                                        _0xde910.next = 0x7
                                    } else if ('docx' === _0xde910['t0']) {
                                        _0xde910.next = 0x9
                                    } else if ('epub' === _0xde910['t0']) {
                                        _0xde910.next = 0xb
                                    } else if ('mobi' === _0xde910['t0']) {
                                        _0xde910.next = 0xd
                                    } else if ('azw3' === _0xde910['t0']) {
                                        _0xde910.next = 0xf
                                    } else if ('pdf' === _0xde910['t0']) {
                                        _0xde910.next = 0x11
                                    } else if ('txt' === _0xde910['t0']) {
                                        _0xde910.next = 0x13
                                    } else {
                                        _0xde910.next = 0x15
                                    }
                                    break
                                case 0x7:
                                case 0x9:
                                    // doc/docx
                                    return _0xde910.abrupt('break', 0x16);
                                case 0xb:
                                case 0xd:
                                case 0xf:
                                case 0x11:
                                case 0x13:
                                    // epub/mobi/azw3/pdf/txt
                                    return _0xde910.abrupt('break', 0x16);
                                case 0x15:
                                case 0x16:
                                    if (this.checkSuffix(file.name)) {
                                        _0xde910.next = 0x1b
                                        break
                                    }
                                    this.handleReportUploadProtoError({
                                        'requestId': '',
                                        'fileName': file.name,
                                        'fileType': fileExt,
                                        'fileSize': file.size,
                                        'stage': 'filecheck',
                                        'errMsg': '文件类型不支持',
                                        'cosKey': '',
                                        'err': _0x2efcf3.WrBookUploadErrorType.err_filecheck_unsupported,
                                        'extra': ''
                                    })
                                    this.updateUploadStatus(task, 'warning', '仅支持 txt / epub / pdf / doc / docx / mobi / azw3 格式', false)
                                    this.unlockCredential()
                                    return _0xde910.abrupt('return')
                                case 0x1b:
                                    if (this.checkSize(file)) {
                                        _0xde910.next = 0x20
                                        break
                                    }
                                    this.handleReportUploadProtoError({
                                        'requestId': '',
                                        'fileName': file.name,
                                        'fileType': fileExt,
                                        'fileSize': file.size,
                                        'stage': 'filecheck',
                                        'errMsg': file.size <= 0 ? '文件大小为0b' : '文件过大',
                                        'cosKey': '',
                                        'err': file.size <= 0
                                            ? _0x2efcf3.WrBookUploadErrorType.err_filecheck_empty
                                            : _0x2efcf3.WrBookUploadErrorType.err_filecheck_oversize,
                                        'extra': ''
                                    })
                                    this.updateUploadStatus(task, 'warning', file.size ? '无法导入，最高支持导入50MB的txt文件，或300MB的其他格式文件' : '无法导入，文件大小为0')
                                    this.unlockCredential()
                                    return _0xde910.abrupt('return')
                                case 0x20:
                                    if (!(this.count + this.uploadingCount() >= this.limit)) {
                                        _0xde910['next'] = 0x25
                                        break
                                    }
                                    this.updateUploadStatus(task, 'error', '已达上限 · 升级为付费会员', true, 'uploadLimit')
                                    if (!this.hasAutoPopped) {
                                        this.$store.commit(_0x3e164d['UPDATE_SHELF_FULL_SHOWN'], {
                                            'type': 'uploadLimit'
                                        })
                                        this.hasAutoPopped = true
                                    }
                                    this.unlockCredential()
                                    return _0xde910.abrupt('return')
                                case 0x25:
                                    if ('undefined' == typeof window) {
                                        _0xde910['next'] = 0x2f
                                        break
                                    }
                                    m1727 = require(1727)
                                    _this = this
                                    if (!file) {
                                        _0xde910.next = 0x2f
                                        break
                                    }

                                    task.uploadStartTime = new Date().getTime()
                                    timer = setInterval(() => {
                                        if ('uploading' === task.status && (task.percent < 49 || task.percent >= 50 && task.percent < 99)) {
                                            task.percent = task.percent + 1
                                        } else {
                                            if ('uploading' !== task.status || task.percent >= 99) {
                                                clearInterval(timer)
                                            }
                                        }
                                    }, 200)
                                    this.reportClientBusiness({
                                        'itemName': 'Web_BookShelf_Import'
                                    })
                                    _0xde910.next = 0x2e

                                    return m1727(file, {
                                        'onFastUpload': function (bookId) {
                                            task.percent = 100
                                            task.bookId = bookId
                                            setTimeout(() => {
                                                return _this.updateUploadStatus(task, 'success')
                                            }, 500)
                                            _this.reportClientBusiness({
                                                'itemName': 'Web_BookShelf_Import_Success'
                                            })
                                            _this.unlockCredential()
                                        },
                                        'onProgress': function (task) {
                                            let _0x22a089 = Math.floor(50 * task.percent)
                                            if ('uploading' === task.status) {
                                                if (task.percent < _0x22a089) {
                                                    task.percent = _0x22a089
                                                }
                                                if (_this.checkTimeout(task.uploadStartTime)) {
                                                    _this.updateUploadStatus(task, 'error', _0x507e41)
                                                    _this.reportUploadCancel(cosKey, file.name)
                                                    _this.handleReportUploadProtoError({
                                                        'requestId': '',
                                                        'fileName': file.name,
                                                        'fileType': fileExt,
                                                        'fileSize': file.size,
                                                        'stage': 'upload',
                                                        'errMsg': '上传到COS超过三分钟，前端主动超时',
                                                        'cosKey': cosKey,
                                                        'err': _0x2efcf3.WrBookUploadErrorType.err_upload_actively_timeout,
                                                        'extra': ''
                                                    })

                                                    let _0x23b18b = {
                                                        'user': _this.$store.state.user.vid,
                                                        'err': '上传到COS超过三分钟，前端主动超时',
                                                        'stage': 'upload to cos timeout, actively cancel',
                                                        'upload': _this.uploadList,
                                                        'fileName': file.name,
                                                        'fileSize': file.size,
                                                        'fileType': file.type
                                                    };
                                                    _0x364152.default.post('https://weread.qq.com/i/hera/chlog', {
                                                        'itemname': 'wereadDesktopCosError',
                                                        'extra': _0x4ab30f.default(_0x23b18b)
                                                    }).catch((err) => {
                                                        console.log(err)
                                                    })
                                                }
                                            }
                                        },
                                        'onSuccess': function () {
                                            if (cosKey) {
                                                task.path = cosKey
                                                _this.fetchBookParseStatus({
                                                    'path': cosKey,
                                                    'name': file.name,
                                                    'uploadData': task
                                                }).then((resp) => {
                                                    task.percent = 100
                                                    task.bookId = resp
                                                    setTimeout(() => {
                                                        return _this.updateUploadStatus(task, 'success')
                                                    }, 500)
                                                    _this.reportClientBusiness({
                                                        'itemName': 'Web_BookShelf_Import_Success'
                                                    })
                                                    _this.$store.dispatch(_0x5ee49b['FETCH_SHELF_UPLOAD_COUNT'])
                                                }).catch((err) => {
                                                    err instanceof Error && _this.handleReportUploadProtoError({
                                                        'requestId': '',
                                                        'fileName': file.name,
                                                        'fileType': fileExt,
                                                        'fileSize': file.size,
                                                        'stage': 'parse',
                                                        'errMsg': err,
                                                        'cosKey': cosKey,
                                                        'err': _0x2efcf3.WrBookUploadErrorType.err_parse_bad_network,
                                                        'extra': err
                                                    })
                                                    '解析超时，前端主动取消' === err
                                                        ? _this.handleReportUploadProtoError({
                                                            'requestId': '',
                                                            'fileName': file.name,
                                                            'fileType': fileExt,
                                                            'fileSize': file.size,
                                                            'stage': 'parse',
                                                            'errMsg': err,
                                                            'cosKey': cosKey,
                                                            'err': _0x2efcf3.WrBookUploadErrorType.err_parse_actively_timeout,
                                                            'extra': ''
                                                        })
                                                        : _this.handleReportUploadProtoError({
                                                            'requestId': '',
                                                            'fileName': file.name,
                                                            'fileType': fileExt,
                                                            'fileSize': file.size,
                                                            'stage': 'parse',
                                                            'errMsg': err,
                                                            'cosKey': cosKey,
                                                            'err': _0x2efcf3.WrBookUploadErrorType.err_parse_failed,
                                                            'extra': ''
                                                        })
                                                    _this.reportClientBusiness({
                                                        'itemName': 'Web_BookShelf_Import_Err_Parsing'
                                                    })
                                                    console.log('[COS] upload error', err)

                                                    let _0x453e85 = {
                                                        'user': _this.$store.state.user.vid,
                                                        'err': err,
                                                        'upload': _this.uploadList,
                                                        'stage': 'parse error',
                                                        'fileName': file.name,
                                                        'fileSize': file.size,
                                                        'fileType': file.type
                                                    }
                                                    envConfig.inDevelopment()
                                                        ? console.log(_0x453e85)
                                                        : _0x364152.default.post('https://weread.qq.com/i/hera/chlog', {
                                                            'itemname': 'wereadDesktopCosError',
                                                            'extra': _0x4ab30f.default(_0x453e85)
                                                        }).catch((err) => {
                                                            console.log(err)
                                                        })
                                                })
                                            }
                                        },
                                        'onError': function (err) {
                                            _this.updateUploadStatus(task, 'error', _0x2ea826)
                                            _this.handleReportUploadProtoError({
                                                'requestId': _0x151607.default(err, 'headers.requestId', ''),
                                                'fileName': file.name,
                                                'fileType': fileExt,
                                                'fileSize': file.size,
                                                'stage': 'upload',
                                                'errMsg': '上传时网络波动',
                                                'cosKey': cosKey,
                                                'err': _0x2efcf3['WrBookUploadErrorType']['err_upload_bad_network'],
                                                'extra': err
                                            })

                                            let _0x3bbca9 = {
                                                'user': _this.$store.state.user.vid,
                                                'err': err,
                                                'stage': 'netWork error during upload to cos',
                                                'fileName': file.name,
                                                'fileSize': file.size,
                                                'fileType': file.type,
                                                'upload': _this.uploadList
                                            }
                                            envConfig.inDevelopment()
                                                ? console.log(_0x3bbca9)
                                                : _0x364152.default.post('https://weread.qq.com/i/hera/chlog', {
                                                    'itemname': 'wereadDesktopCosError',
                                                    'extra': _0x4ab30f.default(_0x3bbca9)
                                                }).catch((err) => {
                                                    console.log(err)
                                                })
                                        },
                                        'onCredentialSuccess': function () {
                                            _this.unlockCredential()
                                        },
                                        'onCredentialFail': function () {
                                            _this.unlockCredential()
                                        }
                                    }).catch((err) => {
                                        let _0x1ad0da = {
                                            'user': _this.$store.state.user.vid,
                                            'err': err,
                                            'stage': 'upload error',
                                            'upload': _this.uploadList,
                                            'fileName': file.name,
                                            'fileSize': file.size,
                                            'fileType': file.type
                                        }
                                        if (err) {
                                            if (-2001 === err.errCode) {
                                                _this.handleReportUploadProtoError({
                                                    'requestId': '',
                                                    'fileName': file.name,
                                                    'fileType': fileExt,
                                                    'fileSize': file.size,
                                                    'stage': 'upload',
                                                    'errMsg': '用户书架已满',
                                                    'cosKey': cosKey,
                                                    'err': _0x2efcf3.WrBookUploadErrorType.err_upload_shelf_full,
                                                    'extra': err
                                                })
                                                _this.unlockCredential()
                                                _this.updateUploadStatus(task, 'error', '已达书架上限 · 升级为付费会员', true, 'shelfFull')
                                                _0x1ad0da.stage += ' shelf full'
                                            } else {
                                                if (-2014 === err.errCode) {
                                                    _this.handleReportUploadProtoError({
                                                        'requestId': '',
                                                        'fileName': file.name,
                                                        'fileType': fileExt,
                                                        'fileSize': file.size,
                                                        'stage': 'upload',
                                                        'errMsg': err.errMsg,
                                                        'cosKey': cosKey,
                                                        'err': _0x2efcf3.WrBookUploadErrorType.err_upload_limited,
                                                        'extra': err
                                                    })
                                                    _this.unlockCredential()
                                                    _this.handleUploadLimit(err.errMsg)
                                                    _0x1ad0da.stage += ' upload limit'
                                                } else {
                                                    _this.handleReportUploadProtoError({
                                                        'requestId': '',
                                                        'fileName': file.name,
                                                        'fileType': fileExt,
                                                        'fileSize': file.size,
                                                        'stage': 'parse',
                                                        'errMsg': '',
                                                        'cosKey': cosKey,
                                                        'err': _0x2efcf3.WrBookUploadErrorType.unknown,
                                                        'extra': err
                                                    })
                                                    _this.unlockCredential()
                                                    _this.updateUploadStatus(task, 'error', _0x2ea826)
                                                }
                                            }
                                        } else {
                                            _0x1ad0da.err = '用户无网络或网络过慢(get\x20credentialsData失败)'
                                            _this.handleReportUploadProtoError({
                                                'requestId': '',
                                                'fileName': file.name,
                                                'fileType': fileExt,
                                                'fileSize': file.size,
                                                'stage': 'upload',
                                                'errMsg': '用户无网络或网络过慢(get credentialsData失败)',
                                                'cosKey': '',
                                                'err': _0x2efcf3.WrBookUploadErrorType.err_get_credentials,
                                                'extra': ''
                                            })
                                            _this.unlockCredential()
                                        }

                                        if (envConfig.inDevelopment()) {
                                            console.log(_0x1ad0da)
                                        } else {
                                            _0x364152.default.post('https://weread.qq.com/i/hera/chlog', {
                                                'itemname': 'wereadDesktopCosError',
                                                'extra': _0x4ab30f.default(_0x1ad0da)
                                            }).catch((err) => {
                                                console.log(err)
                                            })
                                        }
                                        console.log('[COS] upload error ', err)
                                    })
                                case 0x2e:
                                    cosKey = _0xde910.sent
                                case 0x2f:
                                case 'end':
                                    return _0xde910.stop()
                            }
                    }, _0x35a808, this)
                }))
                _0x20abfc = _0x2219e6.default(_0x43da30.default.mark(function _0x566b28(context) {
                    let store = context['store'],
                        user = context['user'],
                        envConfig = context['envConfig'];
                    return _0x43da30.default.wrap(function (_0x5eb10d) {
                        for (; ;)
                            switch (_0x5eb10d[_0x16c5('0x90')] = _0x5eb10d['next']) {
                                case 0x0:
                                    store.registerModule('shelf', _0x5ae67f.default())
                                    envConfig && new _0x2c48d5.default().isPhone(envConfig.userAgent) && store.commit(_0x3e164d.UPDATE_SHOW_NAV_BAR, false)
                                    if (!envConfig.hasLogin(user)) {
                                        _0x5eb10d['next'] = 0x8
                                        break
                                    }
                                    console.log(envConfig)
                                    _0x5eb10d.next = 0x6
                                    return store.dispatch(_0x5ee49b['FETCH_SHELF_UPLOAD_COUNT'], _0x535603.default({}, envConfig))
                                case 0x6:
                                    _0x5eb10d['next'] = 0x8
                                    return store.dispatch(_0x5ee49b['FETCH_SHELF_MEMBER_CARD_SVR'], _0x535603.default({}, envConfig, {
                                        'pf': 'ios'
                                    }))
                                case 0x8:
                                case 'end':
                                    return _0x5eb10d.stop()
                            }
                    }, _0x566b28, this);
                }))

                exports.default = {
                    'name': 'BookUpload',
                    'components': {
                        'FileLimitPanel': FileLimitPanel.default,
                        'ProgressBar': ProgressBar.default,
                        'FileSelectPanel': FileSelectPanel.default,
                    },
                    'data': function () {
                        return {
                            'uploadList': [],
                            'uploadTaskList': [],
                            'credentialLock': false,
                            'hasAutoPopped': false,
                        }
                    },
                    'computed': {
                        'cbCount': function () {
                        },
                        'showDevPanel': function () {
                            return envConfig.inDevelopment()
                        },
                        'limit': function () {
                            return this.paid ? 0x1fffffffffffff : 200
                        },
                        'count': function () {
                            return this.$store.state.shelf.uploadCount
                        },
                        'paid': function () {
                            const memberCardSummary = this.$store.state.shelf.memberCardSummary
                            return memberCardSummary && memberCardSummary.payingRemainTime > 0
                        }
                    },
                    'methods': {
                        'lockCredential': function () {
                            console.log('[book upload] lock credential')
                            this.credentialLock = true
                        },
                        'unlockCredential': function () {
                            console.log('[book upload] unlock credential')
                            this.credentialLock = false
                        },
                        'handleReportUploadProtoError': function (_0x493df0) {
                            let requestId = _0x493df0['requestId'],
                                fileName = _0x493df0['fileName'],
                                fileType = _0x493df0['fileType'],
                                fileSize = _0x493df0['fileSize'],
                                stage = _0x493df0['stage'],
                                errMsg = _0x493df0['errMsg'],
                                cosKey = _0x493df0['cosKey'],
                                err = _0x493df0['err'],
                                extra = _0x493df0['extra'];

                            if (envConfig.inDevelopment()) {
                                console.error('handleReportUploadProtoError', {
                                    'requestId': requestId,
                                    'fileName': fileName,
                                    'fileType': fileType,
                                    'fileSize': fileSize,
                                    'stage': stage,
                                    'errMsg': errMsg,
                                    'cosKey': cosKey,
                                    'err': err,
                                    'extra': extra
                                })
                            }

                            let vid = _0x151607.default(this.user, 'vid', 0),
                                payload = _0x2efcf3.createWrBookUploadErrorReport(vid, {
                                    'requestId': requestId,
                                    'fileName': fileName,
                                    'fileType': fileType,
                                    'fileSize': fileSize,
                                    'stage': stage,
                                    'errMsg': errMsg,
                                    'cosKey': cosKey,
                                    'err': err,
                                    'extra': extra
                                });

                            _0x2efcf3.setProtoLog('wr_book_upload_error_report', payload).then((resp) => {
                                console.log('handleReportUploadProtoError', resp)
                            }).catch((err) => {
                                console.error('handleReportUploadProtoError', err)
                            })
                        },
                        'handleLogin': function () {
                            this.$showLoginDialog()
                        },
                        'handleAddUploadTask': function (file) {
                            let task = new Object({
                                'name': file.name,
                                'status': 'uploading',
                                'percent': 0,
                                'message': '',
                                'file': file,
                                'bookId': '',
                                'clickable': false,
                                'uploadStartTime': 0,
                                'actionType': 'default',
                                'path': ''
                            })
                            this.uploadList.push(task)
                            this.uploadTaskList.push(task)
                        },
                        'createUploadTaskHandler': function () {
                            const _this = this
                            setInterval(_0x2219e6.default(_0x43da30.default.mark(function _0x3dff3f() {
                                return _0x43da30.default.wrap(function (_0xcb3e71) {
                                    for (; ;)
                                        switch (_0xcb3e71.prev = _0xcb3e71.next) {
                                            case 0:
                                                if ((!_this.uploadTaskList.length || _this.uploadingCount() >= 5)) {
                                                    _0xcb3e71.next = 7
                                                    break
                                                }
                                                if (!_this.credentialLock) {
                                                    _0xcb3e71.next = 4
                                                    break
                                                }

                                                console.log('[book upload] credential locked, skip upload')
                                                return _0xcb3e71.abrupt('return')
                                            case 4:
                                                _0xcb3e71.next = 6
                                                return _this.$store.dispatch('fetchShelfIndex')
                                            case 6:
                                                _this.$nextTick(function () {
                                                    _this.lockCredential()
                                                    const task = _this.uploadTaskList.shift()
                                                    _this.handleUploadBook(task)
                                                })
                                            case 7:
                                            case 'end':
                                                return _0xcb3e71.stop()
                                        }
                                }, _0x3dff3f, _this);
                            })), 2000)
                        },
                        'handleErrorClick': function (task) {
                            'shelfFull' === task.actionType
                                ? this.$store.commit(_0x3e164d['UPDATE_SHELF_FULL_SHOWN'], true)
                                : 'uploadLimit' === task.actionType
                                    ? this.$store.commit(_0x3e164d['UPDATE_SHELF_FULL_SHOWN'], {
                                        'type': 'uploadLimit'
                                    })
                                    : this.handleRetry(task)
                        },
                        'handleRetry': function (task) {
                            task.status = 'uploading'
                            task.percent = 0
                            task.message = ''
                            task.clickable = false
                            this.handleUploadBook(task)
                        },
                        'handleOpenBook': function (task) {
                            let isElectron = 'electron' === new _0x2c48d5.default().getPlatform()
                            window.open(this.readerURL(task.bookId), isElectron ? '_self' : null)
                        },
                        'handleReselect': function () {
                            this.$refs.fileSelectPanel.selectFile()
                        },
                        'checkSuffix': function (fileName) {
                            return /(\.epub)|(\.txt)|(\.pdf)|(\.doc)|(\.docx)|(\.mobi)|(\.azw3)/.test(fileName.toLowerCase())
                        },
                        'getSuffix': function (fileName) {
                            let re = /^.*\.(.*)$/;
                            return re.test(fileName) ? re.exec(fileName)[1] : '';
                        },
                        'checkSize': function (file) {
                            if (envConfig.inDevelopment() && this.$route.query.noSizeLimit) {
                                return true
                            }
                            if (file.size <= 0) {
                                return false
                            }
                            let filename = file.name.toLowerCase();
                            return /(\.epub)/.test(filename) || /(\.mobi)/.test(filename) || /(\.azw3)/.test(filename)
                                ? file.size <= _300M
                                : /(\.txt)/.test(filename)
                                    ? file.size <= _50M
                                    : /(\.pdf)/.test(filename)
                                        ? file.size <= _300M
                                        : !!/(\.doc)|(\.docx)/.test(filename) && file.size <= _300M
                        },
                        'checkTimeout': function (uploadStartTime) {
                            return new Date().getTime() - uploadStartTime > 180_000
                        },
                        'parseBookId': function (str) {
                            if (!str) {
                                return ''
                            }
                            let result = str.match(/CB_\S+$/)
                            return result ? result[0] : ''
                        },

                        // 正在上传中的任务数量
                        'uploadingCount': function () {
                            return this.uploadList.reduce((total, item) => {
                                return 'uploading' === item.status && item.uploadStartTime > 0 ? total + 1 : total
                            }, 0)
                        },
                        'handleUploadBook': function (task) {
                            return _0x406a30.apply(this, arguments)
                        },
                        'fetchBookParseStatus': function (_0x326643) {
                            let _this = this,
                                path = _0x326643.path,
                                name = _0x326643.name,
                                uploadData = _0x326643.uploadData;

                            return new _0x2f7d12.default((resolve, reject) => {
                                let timer = setInterval(() => {
                                    if (_this.checkTimeout(uploadData.uploadStartTime)) {
                                        _this.updateUploadStatus(uploadData, 'error', _0x507e41)
                                        _this.reportUploadCancel(path, name)
                                        clearInterval(timer)
                                        return void reject('解析超时，前端主动取消')
                                    }

                                    if ('uploading' === uploadData.status) {
                                        _0x5b69b6.default('/web/cos/notify', {
                                            'path': path,
                                            'name': name
                                        }).then(resp => {
                                            if (0 === resp.data.status || 3 === resp.data.status) {
                                                clearInterval(timer)
                                                resolve(resp.data.bookId)
                                            } else if (2 === resp.data.status) {
                                                clearInterval(timer)
                                                _this.updateUploadStatus(uploadData, 'warning', resp.data.errmsg, false)
                                                reject(resp.data.errmsg)
                                            } else if (1 !== resp.data.status) {
                                                clearInterval(timer)
                                                _this.updateUploadStatus(uploadData, 'warning')
                                                reject(resp.data.status)
                                            }
                                        }).catch(err => {
                                            clearInterval(timer)
                                            _this.updateUploadStatus(uploadData, 'error')
                                            console.log('[COS] err parsing', err)
                                            reject(err)
                                        })
                                    } else {
                                        clearInterval(timer)
                                    }

                                }, 2000)
                            })
                        },
                        'updateUploadStatus': function (task, status, message) {
                            let clickable = !(arguments.length > 3 && undefined !== arguments[3]) || arguments[3],
                                actionType = arguments.length > 4 && undefined !== arguments[4] ? arguments[4] : 'default',
                                defaultStatusMessage = {
                                    'success': {
                                        'message': '导入完成 · 立即阅读'
                                    },
                                    'error': {
                                        'message': '导入失败'
                                    },
                                    'warning': {
                                        'message': '导入失败'
                                    }
                                };
                            task.status = status
                            task.message = message || defaultStatusMessage[status].message
                            task.clickable = clickable
                            task.actionType = actionType
                        },
                        'reportUploadCancel': function (path, name) {
                            return _0x5b69b6.default('/web/cos/notify', {
                                'path': path,
                                'name': name,
                                'cancel': 1
                            }).catch((err) => {
                                console.log('report upload cancel failed', err)
                            })
                        },
                        'handleUploadLimit': function (_0x24bf03) {
                            let _this = this
                            this.uploadTaskList = []
                            this.uploadList.forEach(task => {
                                if ('uploading' === task.status) {
                                    _this.updateUploadStatus(task, 'error', _0x24bf03)
                                    task.percent >= 50 && _this.reportUploadCancel(task.path, task.name)
                                }
                            })
                        }
                    },
                    'asyncData': function () {
                        return _0x20abfc.apply(this, arguments);
                    },
                    'mounted': function () {
                        let _this = this;
                        envConfig.isEnvClient && this.$store.registerModule('shelf', _0x5ae67f.default(), {
                            'preserveState': true
                        })
                        window.onbeforeunload = function () {
                            return _this.uploadList.reduce((total, item) => {
                                return 'uploading' === item.status ? total + 1 : total;
                            }, 0) > 0 ? '你当前的传输进度将不会被保存' : null;
                        }

                        if (document) {
                            document.addEventListener('drop', function (event) {
                                event.preventDefault && event.preventDefault();
                            })
                            document.addEventListener('dragover', function (event) {
                                event.preventDefault && event.preventDefault();
                            })
                        }
                        this.createUploadTaskHandler()
                        this.reportClientBusiness({
                            'itemName': 'Web_BookShelf_Import_Expose'
                        })
                    },
                    'destroyed': function () {
                        window.onbeforeunload = function () {
                        }
                    }
                };
            },
            1265: function (module, exports, require) {
                require['r'](exports)

                let m1266 = require(1266),
                    _0x2ec92a = require['n'](m1266);

                for (let key in m1266) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1266[key];
                        })
                    }
                }

                exports.default = _0x2ec92a['a']
            },

            // BookUploadProgressBar.vue
            // 触发的事件：
            //   - handleErrorClick
            //   - handleWarningClick
            //   - handleSuccessClick
            1266: function (module, exports, require) {
                Object.defineProperty(exports, '__esModule', {value: true})

                exports.default = {
                    'name': 'BookUploadProgressBar.vue',
                    'props': {
                        'status': {
                            'type': String,
                            'default': ''
                        },
                        'percent': {
                            'type': Number,
                            'default': 0
                        },
                        'message': {
                            'type': String,
                            'default': ''
                        },
                        'name': {
                            'type': String,
                            'default': ''
                        },
                        'clickable': {
                            'type': Boolean,
                            'default': false
                        }
                    },
                    'data': function () {
                        return {
                            'hovering': false,
                            'tooltipRight': 0
                        }
                    },
                    'computed': {
                        'displayMessage': function () {
                            if (this.status === 'uploading') {
                                return this.percent + '%'
                            } else if ('warning' === this.status || 'error' === this.status) {
                                return '导入失败'
                            } else {
                                return this.message
                            }
                        }
                    },
                    'methods': {
                        'handleBarClick': function () {
                            if (this.clickable) {
                                'error' === this.status
                                    ? this.$emit('handleErrorClick')
                                    : 'warning' === this.status
                                        ? this.$emit('handleWarningClick')
                                        : 'success' === this.status && this.$emit('handleSuccessClick')
                            }
                        },
                        'handleHover': function (event) {
                            if ('bookUpload_progressBar_tooltip' !== event.toElement.className) {
                                this.hovering = true
                                if (this.$refs.tooltip) {
                                    this.tooltipRight = -this.$refs.tooltip.offsetWidth / 2 + 30
                                }
                            }
                        },
                        'handleOut': function () {
                            this.hovering = false
                        }
                    }
                };
            },
            1267: function (_0x54351c, _0x534e2d, _0x160b2e) {
            },
            1268: function (module, exports, require) {
                require['r'](exports)

                let m1269 = require(1269),
                    _0x4a575f = require['n'](m1269);

                for (let key in m1269) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1269[key];
                        })
                    }
                }

                exports.default = _0x4a575f['a']
            },

            // BookUploadFileSelectPanel.vue
            // 触发的事件：
            //   - handleUpload(file)
            1269: function (module, exports, require) {
                Object.defineProperty(exports, '__esModule', {value: true})

                let _0x9f8295,
                    _0x214277,
                    _0x5b03d5 = _0x126e6a(require(365)),
                    _0x2b5033 = _0x126e6a(require(366));

                function _0x126e6a(_0x29347a) {
                    return _0x29347a && _0x29347a['__esModule'] ? _0x29347a : {
                        'default': _0x29347a
                    };
                }

                exports.default = {
                    'name': 'BookUploadFileSelectPanel.vue',
                    'data': function () {
                        return {
                            'isDragging': false
                        }
                    },
                    'methods': {
                        'selectFile': function () {
                            this.$refs.fileHandler.click()
                        },
                        'handleFileSelected': (_0x214277 = _0x2b5033.default(_0x5b03d5.default.mark(function _0x313f67(event) {
                                let files, i;
                                return _0x5b03d5.default.wrap(function (state) {
                                    for (; ;)
                                        switch (state['prev'] = state['next']) {
                                            case 0x0:
                                                files = event.target.files
                                                for (i = 0; i < files.length; i++) {
                                                    this.$emit('handleUpload', files[i])
                                                }
                                                this.$refs.fileHandler.value = null
                                            case 0x3:
                                            case 'end':
                                                return state.stop()
                                        }
                                }, _0x313f67, this)
                            })),
                                function (event) {
                                    return _0x214277.apply(this, arguments)
                                }
                        ),
                        'handleDragStart': function () {
                            this.isDragging = true
                        },
                        'handleDragCancel': function () {
                            this.isDragging = false
                        },
                        'handleFileDrop': (_0x9f8295 = _0x2b5033.default(_0x5b03d5.default.mark(function _0x30bf66(event) {
                                let files, i;
                                return _0x5b03d5.default.wrap(function (_0x1805b7) {
                                    for (; ;)
                                        switch (_0x1805b7['prev'] = _0x1805b7['next']) {
                                            case 0x0:
                                                files = event.dataTransfer.files
                                                for (i = 0; i < files.length; i++) {
                                                    this.$emit('handleUpload', files[i])
                                                }
                                                this.isDragging = false
                                            case 0x3:
                                            case 'end':
                                                return _0x1805b7.stop()
                                        }
                                }, _0x30bf66, this)
                            })),
                                function (event) {
                                    return _0x9f8295.apply(this, arguments)
                                }
                        )
                    }
                };
            },
            1270: function (_0x38c9bc, _0x1e4990, _0x3f146f) {
            },
            1271: function (module, exports, require) {
                require['r'](exports)

                let m1272 = require(1272),
                    _0x4e2617 = require['n'](m1272);

                for (const key in m1272) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1272[key];
                        });
                    }
                }

                exports.default = _0x4e2617['a']
            },

            // FileLimitPanel.vue
            1272: function (module, exports, require) {
                Object.defineProperty(exports, '__esModule', {value: true})

                exports.default = {
                    'name': 'FileLimitPanel',
                    'props': {
                        'limit': {
                            'type': Number,
                            'default': 0
                        },
                        'count': {
                            'type': Number,
                            'default': 0
                        },
                        'paid': {
                            'type': Boolean,
                            'default': false
                        }
                    }
                }
            },
            1273: function (_0x36e11a, _0x2295e8, _0x44d027) {
            },
            1274: function (_0x4ba66c, _0x5b5eaf, _0x1b36ed) {
            },
            1720: function (module, exports, require) {
                require.r(exports)

                let m1986 = require(1986),
                    m1265 = require(1265);

                for (const key in m1265) {
                    if ('default' !== key) {
                        require.d(exports, key, function () {
                            return m1265[key];
                        })
                    }
                }

                require(0x6ba);

                let _0x5a92df = require(1),
                    _0x1472ae = Object(_0x5a92df['a'])(m1265.default, m1986['a'], m1986['b'], false, null, null, null);

                exports.default = _0x1472ae.exports
            },
            1721: function (module, exports) {
                module.exports = 'https://weread-1258476243.file.myqcloud.com/web/wrwebnjlogic/image/upload_uploading_icon_2x.dd6c2d10.png'
            },
            1722: function (module, exports, require) {
                let m1267 = require(1267)

                require['n'](m1267)['a']
            },
            1723: function (module, exports, require) {
                require.r(exports)

                let m1987 = require(1987),
                    m1268 = require(1268);

                for (const key in m1268) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1268[key];
                        })
                    }
                }

                require(0x6bc)

                let _0x5e34c3 = require(0x1),
                    _0x11450e = Object(_0x5e34c3['a'])(m1268['default'], m1987['a'], m1987['b'], false, null, null, null);

                exports.default = _0x11450e.exports
            },
            1724: function (module, exports, require) {
                let m1270 = require(1270)
                require['n'](m1270)['a']
            },
            1725: function (module, exports, require) {
                require.r(exports)

                let m1988 = require(1988),
                    m1271 = require(1271);

                for (const key in m1271) {
                    if ('default' !== key) {
                        require['d'](exports, key, function () {
                            return m1271[key];
                        })
                    }
                }

                require(1726)

                let _0x2e99a2 = require(1),
                    _0x1f7987 = Object(_0x2e99a2['a'])(m1271.default, m1988['a'], m1988['b'], false, null, null, null);

                exports.default = _0x1f7987.exports
            },
            1726: function (module, exports, require) {
                let m1273 = require(1273)
                require['n'](m1273)['a']
            },

            // 文件切片 及 上传
            1727: function (module, exports, require) {
                let _0x143c20,
                    _0x2f6e0e,
                    _0x34f3c1 = _0x4ab74f(require(0x33)),
                    _0x2b6adf = _0x4ab74f(require(0x16d)),
                    _0x5d4538 = _0x4ab74f(require(0x47)),
                    _0x4aa459 = _0x4ab74f(require(0x16e)),
                    _0xaeda40 = (_0x143c20 = _0x4aa459.default(_0x2b6adf.default.mark(function _0x319f4e(file) {
                            return _0x2b6adf.default.wrap(function (_0x56acc4) {
                                for (; ;)
                                    switch (_0x56acc4['prev'] = _0x56acc4['next']) {
                                        case 0x0:
                                            return _0x56acc4.abrupt('return', new _0x5d4538.default((resolve, reject) => {
                                                console.time('hashFileIncremental(' + file.name + '): size=' + file.size)
                                                let _0x3424be = require(0x6c0),
                                                    fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
                                                    chunkSize = 0x200000, // 2M
                                                    totalChunk = Math.ceil(file.size / chunkSize),
                                                    currentChunkIdx = 0,
                                                    buffer = new _0x3424be.ArrayBuffer(),
                                                    fileReader = new FileReader();

                                                function _0x9db7d3() {
                                                    let startOffset = currentChunkIdx * chunkSize,
                                                        endOffset = startOffset + chunkSize >= file.size ? file.size : startOffset + chunkSize;
                                                    fileReader.readAsArrayBuffer(fileSlice.call(file, startOffset, endOffset))
                                                }

                                                fileReader.onload = function (event) {
                                                    console.log('read chunk nr', currentChunkIdx + 1, 'of', totalChunk)
                                                    buffer.append(event.target.result)
                                                    if (++currentChunkIdx < totalChunk) {
                                                        _0x9db7d3()
                                                    } else {
                                                        console.log('finished loading')
                                                        let fileData = buffer.end();
                                                        console.info('computed hash', fileData)
                                                        console.timeEnd('hashFileIncremental(' + file.name + '): size=' + file.size)
                                                        resolve(fileData)
                                                    }
                                                }
                                                fileReader.onerror = function () {
                                                    console.warn('oops, something went wrong.' + fileReader.error)
                                                    console.time('hashFileIncremental(' + file.name + '): size=' + file.size)
                                                    reject(fileReader.error)
                                                }
                                                _0x9db7d3();
                                            }))
                                        case 0x1:
                                        case 'end':
                                            return _0x56acc4.stop()
                                    }
                            }, _0x319f4e, this)
                        })),
                            function (file) {
                                return _0x143c20.apply(this, arguments);
                            }
                    ),
                    _0x173f5b = (_0x2f6e0e = _0x4aa459.default(_0x2b6adf.default.mark(function _0x19cd98(file, options) {
                            let md5,
                                _0xce6181,
                                timestamp,
                                random,
                                signature,
                                receiveResp,
                                credentialResp,
                                credentials,
                                objectName,
                                region;

                            return _0x2b6adf.default.wrap(function (_0x25618a) {
                                for (; ;)
                                    switch (_0x25618a['prev'] = _0x25618a['next']) {
                                        case 0x0:
                                            _0x25618a['next'] = 0x2
                                            return _0x3602ff.default('/mp/shelf/shelfFull').then((resp) => {
                                                return resp.data.isShelfFull
                                            }).catch(() => {
                                                return false
                                            })
                                        case 0x2:
                                            if (!_0x25618a.sent) {
                                                _0x25618a.next = 0x5;
                                                break;
                                            }
                                            throw {
                                                'errCode': -2001,
                                                'errMsg': '书架已满'
                                            };
                                        case 0x5:
                                            _0x25618a['next'] = 0x7
                                            // 分批次转为 ArrayBuffer
                                            return _0xaeda40(file)
                                        case 0x7:
                                            md5 = _0x25618a.sent
                                            _0xce6181 = _sign(md5)
                                            timestamp = _0xce6181.timestamp
                                            random = _0xce6181.random
                                            signature = _0xce6181.signature
                                            _0x25618a.next = 0xb
                                            return _0x47e3f6.default('/web/cos/receive', {
                                                'name': file.name,
                                                'md5': md5,
                                                'signature': signature,
                                                'timestamp': timestamp,
                                                'random': random,
                                                'bookId': ''
                                            }).catch(err => {
                                                console.log('[COS] err receive', err)
                                                return false
                                            })
                                        case 0xb:
                                            receiveResp = _0x25618a.sent
                                            console.log('[COS] receiveResp', receiveResp)
                                            if (!(receiveResp && receiveResp.data && receiveResp.data.bookInfo && receiveResp.data.bookInfo.bookId)) {
                                                _0x25618a['next'] = 0x11
                                                break;
                                            }
                                            _0x18356d.default.inDevelopment() && console.log('[COS] bookId', receiveResp.data.bookInfo.bookId)
                                            options.onFastUpload(receiveResp.data.bookInfo.bookId)
                                            return _0x25618a.abrupt('return')
                                        case 0x11:
                                            _0x25618a['next'] = 0x13
                                            return _0x3602ff.default('/web/cos/getcredential', {
                                                'name': file.name
                                            }).then((resp) => {
                                                options.onCredentialSuccess && options.onCredentialSuccess()
                                                return resp.data
                                            }).catch((err) => {
                                                options.onCredentialFail && options.onCredentialFail()
                                                if (-2014 === err.errCode)
                                                    throw {
                                                        'errCode': -2014,
                                                        'errMsg': err.errMsg
                                                    }
                                                console.log('[COS] err get credentialsData', err)
                                                return false
                                            })
                                        case 0x13:
                                            if (!((credentialResp = _0x25618a.sent) && credentialResp.Response && credentialResp.Response.Credentials)) {
                                                _0x25618a['next'] = 0x1d;
                                                break;
                                            }
                                            credentials = credentialResp.Response.Credentials
                                            objectName = credentialResp.ObjectName
                                            region = credentialResp.region
                                            new _0x4b76e4.default({
                                                'getAuthorization': function (_0xe8d4e3, _0x4a45e0) {
                                                    _0x4a45e0({
                                                        'TmpSecretId': credentials.TmpSecretId,
                                                        'TmpSecretKey': credentials.TmpSecretKey,
                                                        'XCosSecurityToken': credentials.Token,
                                                        'StartTime': credentialResp.ServerTime,
                                                        'ExpiredTime': credentialResp.Response.ExpiredTime,
                                                    })
                                                }
                                            }).sliceUploadFile(_0x34f3c1.default({
                                                'Bucket': _0x928849,
                                                'Region': region || _0xd2efed,
                                                'Key': objectName,
                                                'Body': file
                                            }, options), function (_0x55e221, _0x276224) {
                                                if (_0x55e221) {
                                                    console[_0x16c5('0x12')]('[COS]\x20err\x20upload\x20', _0x55e221, _0x276224);
                                                    var _0x5bafcd = {
                                                        'error': _0x55e221[_0x16c5('0x3c')],
                                                        'code': _0x55e221['statusCode'],
                                                        'headers': _0x55e221['headers']
                                                    };
                                                    options['onError'](_0x5bafcd);
                                                } else if (_0x276224)
                                                    return console['log'](_0x16c5('0x8f'), _0x276224),
                                                        void options['onSuccess']();
                                            })
                                            return _0x25618a.abrupt('return', objectName)
                                        case 0x1d:
                                            console.log('[COS] err get credentialsData', credentialResp)
                                            return _0x25618a.abrupt('return', _0x5d4538.default.reject(false))
                                        case 0x1f:
                                        case 'end':
                                            return _0x25618a.stop();
                                    }
                            }, _0x19cd98, this)
                        })),
                            function (file, options) {
                                return _0x2f6e0e.apply(this, arguments)
                            }
                    ),
                    _0x3602ff = _0x4ab74f(require(0x5c)),
                    _0x4b76e4 = _0x4ab74f(require(1729)),
                    _0x36b7c6 = _0x4ab74f(require(0x5f)),
                    _0x47e3f6 = _0x4ab74f(require(0x35)),
                    _0x18356d = _0x4ab74f(require(0x8));

                function _0x4ab74f(_0x54e50a) {
                    return _0x54e50a && _0x54e50a['__esModule'] ? _0x54e50a : {
                        'default': _0x54e50a
                    };
                }

                let _0x928849 = 'weread-epub-1258476243',
                    _0xd2efed = 'ap-shanghai';

                function _sign(data) {
                    let now = Math.floor(Date.now() / 1000),
                        rnd = Math.floor(100_000 * Math.random());

                    return {
                        'timestamp': now,
                        'random': rnd,
                        'signature': _0x36b7c6.default.s(rnd, now, data)
                    }
                }

                module.exports = _0x173f5b
            },
            1742: function (module, exports, require) {
                let m1274 = require(1274)
                require['n'](m1274)['a']
            },

            // view结构: BookUpload.vue
            1962: function (module, exports, require) {
                let a = function () {
                    let _this = this,
                        _0x26f946 = _this.$createElement,
                        h = _this._self['_c'] || _0x26f946;

                    return h('div', {
                        'staticClass': 'uploadContent'
                    }, [
                        _this.hasLogin
                            ? h('div', {
                                'staticClass': 'app_content'
                            }, [
                                _this.paid
                                    ? h('file-limit-panel', {
                                        'attrs': {
                                            'limit': _this.limit,
                                            'count': _this.count,
                                            'paid': _this.paid,
                                        }
                                    })
                                    : _this._e(),
                                h('file-select-panel', {
                                    'ref': 'fileSelectPanel',
                                    'staticClass': 'bookUpload_fileSelect',
                                    'on': {
                                        'handleUpload': _this.handleAddUploadTask
                                    }
                                }),
                                h('div', {
                                    'staticClass': 'bookUpload_progress_warp'
                                }, _this._l(_this.uploadList, function (item, idx) {
                                    return h('progress-bar', {
                                        'key': idx,
                                        'staticClass': 'bookUpload_progress_item',
                                        'attrs': {
                                            'status': item.status,
                                            'name': item.name,
                                            'percent': item.percent,
                                            'message': item.message,
                                            'clickable': item.clickable
                                        },
                                        'on': {
                                            'handleErrorClick': function (event) {
                                                return _this.handleErrorClick(item)
                                            },
                                            'handleSuccessClick': function (event) {
                                                return _this.handleOpenBook(item)
                                            },
                                            'handleWarningClick': _this.handleReselect
                                        }
                                    });
                                }), 1)
                            ], 1)
                            : h('div', {
                                'staticClass': 'bookUpload_login'
                            }, [
                                h('p', [_this._v('暂未登录，请用微信登录后再上传书籍')]),
                                h('button', {
                                    'on': {
                                        'click': _this.handleLogin
                                    }
                                }, [_this._v('微信扫码登录')])]),

                        _this.showDevPanel
                            ? h('div', {
                                'staticClass': 'wr_upload_devPanel'
                            }, [
                                _this._m(0),
                                _this._m(1)
                            ])
                            : _this._e()
                    ]);
                }

                let b = [
                    function () {
                        let _this = this,
                            _0xd4a8d7 = _this.$createElement,
                            h = _this._self['_c'] || _0xd4a8d7;

                        return h('div', {
                            'staticClass': 'wr_upload_devPanel_item'
                        }, [
                            h('input', {
                                'attrs': {
                                    'type': 'checkbox',
                                    'id': 'forceShelfFull',
                                    'value': 'shelfFull'
                                }
                            }),
                            h('label', {
                                'attrs': {
                                    'for': 'forceShelfFull'
                                }
                            }, [_this._v('强制返回书架满(上传预检)')])
                        ])
                    },
                    function () {
                        let _this = this,
                            _0x5b3ad1 = _this.$createElement,
                            h = _this['_self']['_c'] || _0x5b3ad1;

                        return h('div', {
                            'staticClass': 'wr_upload_devPanel_item'
                        }, [
                            h('input', {
                                'attrs': {
                                    'type': 'checkbox',
                                    'id': 'forceShelfFullCGI',
                                    'value': 'shelfFullCGI'
                                }
                            }),
                            h('label', {
                                'attrs': {
                                    'for': 'forceShelfFull'
                                }
                            }, [_this._v('强制返回书架满(notify CGI)')])
                        ])
                    }
                ]

                require['d'](exports, 'a', function () {
                    return a;
                })
                require['d'](exports, 'b', function () {
                    return b;
                })
            },

            // view结构: BookUploadProgressBar.vue
            1986: function (module, exports, require) {
                let a = function () {
                        let _this = this,
                            $createElement = _this['$createElement'],
                            h = _this['_self']['_c'] || $createElement;

                        return h('div', {
                            'class': [
                                'bookUpload_progressBar',
                                {
                                    'bookUpload_progressBar_Uploading': 'uploading' === _this.status
                                },
                                {
                                    'bookUpload_progressBar_Success': 'success' === _this.status
                                },
                                {
                                    'bookUpload_progressBar_Warning': 'warning' === _this.status
                                },
                                {
                                    'bookUpload_progressBar_Error': 'error' === _this.status
                                },
                                {
                                    'bookUpload_progressBar_Clickable': _this.clickable
                                }
                            ],
                            'on': {
                                'click': _this.handleBarClick,
                                'mouseover': _this.handleHover,
                                'mouseout': _this.handleOut
                            }
                        }, [
                            'uploading' === _this.status ?
                                h('div', {
                                    'staticClass': 'bookUpload_progressBar_progress',
                                    'style': {
                                        'width': _this.percent + '%'
                                    }
                                }) :
                                _this._e(),
                            h('div', {
                                'staticClass': 'bookUpload_progressBar_content'
                            }, [
                                h('div', {
                                    'staticClass': 'bookUpload_progressBar_name'
                                }, [
                                    _this._v(_this._s(_this.name))
                                ]),
                                h('div', {
                                    'staticClass': 'bookUpload_progressBar_info'
                                }, [
                                    h('div', {
                                        'class': [
                                            'bookUpload_progressBar_message',
                                            {
                                                'bookUpload_progressBar_message_percent': 'uploading' === _this.status
                                            }
                                        ]
                                    }, [
                                        h('span', {
                                            'staticClass': 'bookUpload_progressBar_message_main'
                                        }, [
                                            _this._v(_this._s(_this.displayMessage))
                                        ]),
                                        'success' !== _this.status ?
                                            h('span', {
                                                'staticClass': 'bookUpload_progressBar_message_sub'
                                            }, [_this._v(_this._s(_this.message))]) :
                                            _this._e()
                                    ]),
                                    'uploading' !== _this.status ?
                                        h('i', {
                                            'staticClass': 'bookUpload_progressBar_icon'
                                        }) :
                                        h('img', {
                                            'staticClass': 'bookUpload_progressBar_icon',
                                            'attrs': {
                                                'src': require(1721)
                                            }
                                        })
                                ])
                            ])
                        ])
                    },
                    b = [];

                require['d'](exports, 'a', function () {
                    return a;
                })
                require['d'](exports, 'b', function () {
                    return b;
                })
            },

            // view结构: BookUploadFileSelectPanel.vue
            1987: function (module, exports, require) {
                let a = function () {
                        let _this = this,
                            _0x430899 = _this['$createElement'],
                            h = _this['_self']['_c'] || _0x430899;

                        return h('div', {
                            'class': [
                                'bookUpload_fileSelectPanel',
                                {
                                    'bookUpload_fileSelectPanel_drag': _this.isDragging
                                }
                            ],
                            'on': {
                                'drop': function (event) {
                                    event.preventDefault()
                                    event.stopPropagation()
                                    return _this.handleFileDrop(event)
                                },
                                'dragenter': function (event) {
                                    event.preventDefault()
                                    return _this.handleDragStart(event)
                                },
                                'dragleave': function (event) {
                                    event.preventDefault()
                                    return _this.handleDragCancel(event)
                                },
                                'dragover': function (event) {
                                    event.preventDefault()
                                    return _this.handleDragStart(event)
                                },
                                'click': _this.selectFile
                            }
                        }, [
                            _this._m(0),
                            h('div', {
                                'staticClass': 'bookUpload_fileSelectPanel_content'
                            }, [
                                _this.isDragging ?
                                    h('div', {
                                        'staticClass': 'bookUpload_fileSelectPanel_label'
                                    }, [_this._v('释放鼠标')]) :
                                    h('div', {
                                        'staticClass': 'bookUpload_fileSelectPanel_label'
                                    }, [
                                        _this._v('拖拽文件到此处 或 '),
                                        h('span', {
                                            'staticClass': 'bookUpload_fileSelectPanel_select'
                                        }, [_this._v('选择文件')])
                                    ]),
                                h('div', {
                                    'staticClass': 'bookUpload_fileSelectPanel_label_small'
                                }, [_this._v('支持 txt / pdf / epub / doc / docx / mobi / azw3 格式，上传完成后可在「书架」中查看')])
                            ]),
                            h('input', {
                                'ref': 'fileHandler',
                                'staticClass': 'bookUpload_fileSelectPanel_file',
                                'attrs': {
                                    'type': 'file',
                                    'multiple': '',
                                    'accept': '.epub,.txt,.pdf,.doc,.docx,.mobi,.azw3'
                                },
                                'on': {
                                    'change': function (event) {
                                        return _this.handleFileSelected(event)
                                    }
                                }
                            })
                        ])
                    },
                    b = [function () {
                        let _0x1359bc = this['$createElement'],
                            h = this['_self']['_c'] || _0x1359bc;

                        return h('div', {
                            'staticClass': 'bookUpload_fileSelectPanel_icon'
                        }, [
                            h('div', {
                                'staticClass': 'bookUpload_fileSelectPanel_icon_pic'
                            })
                        ])
                    }];

                require['d'](exports, 'a', function () {
                    return a;
                })
                require['d'](exports, 'b', function () {
                    return b;
                })
            },

            // view结构: FileLimitPanel
            1988: function (module, exports, require) {
                let a = function () {
                        let _this = this,
                            $createElement = _this['$createElement'],
                            h = _this['_self']['_c'] || $createElement;

                        return h('div', {
                            'staticClass': 'wr_upload_limit_wrapper'
                        }, [
                            _this.paid ?
                                [
                                    h('div', {
                                        'staticClass': 'wr_upload_limit_paid'
                                    }, [
                                        h('div', {
                                            'staticClass': 'wr_upload_limit_paid_lang'
                                        }, [
                                            _this._v('\n                    导入书籍 ·'),
                                            h('span', {
                                                'staticClass': 'wr_upload_limit_paid_lang_icon'
                                            }),
                                            _this._v('已导入 ' + _this._s(_this.count) + ' 本，付费会员无上限\n                ')
                                        ])
                                    ])
                                ] :
                                [
                                    h('div', {
                                        'staticClass': 'wr_upload_limit_unpaid'
                                    }, [
                                        h('div', {
                                            'staticClass': 'wr_upload_limit_unpaid_title'
                                        }, [
                                            _this._v('\n  导入书籍 · 已导入 ' + _this._s(_this.count) + ' 本，上限 ' + _this._s(_this.limit) + ' 本，付费会员无上限')
                                        ])
                                    ])
                                ]
                        ], 2)
                    },
                    b = [];

                require['d'](exports, 'a', function () {
                    return a;
                })
                require['d'](exports, 'b', function () {
                    return b;
                })
            },
        }
    ]
);
